# BUZZメーカー - 要件定義書

## 1. サービス概要

### 1.1 コンセプト
「独り言・思いつき → バズるXポスト」変換アプリ。
ユーザーの雑な独り言やアイデアを、Xでバズりやすいナラティブ・トンマナに自動変換する。

### 1.2 ターゲットユーザー
- X（Twitter）でフォロワーを増やしたい個人
- 発信したいけど文章力に自信がない人
- アイデアはあるが投稿の最適化が面倒な人
- インフルエンサー・マーケター

### 1.3 解決する課題
- 「何をどう書けばバズるかわからない」
- 「思いついたことをそのまま投稿してもスルーされる」
- 「投稿の最適化に時間がかかりすぎる」

---

## 2. 機能要件

### 2.1 MVP機能（Phase 1）

#### 2.1.1 テキスト入力
- 自由入力テキストエリア（独り言・アイデア）
- 最大500文字程度
- プレースホルダー例: 「今日カフェで仕事してたら隣の人がめっちゃ集中してて自分もやる気出た」

#### 2.1.2 X向けポスト生成
- 入力テキストをAIがX最適のポストに変換
- 複数パターン（3案）を同時生成
  - 共感型
  - 意外性・学び型
  - ストーリー型
- 各案に「バズりポイント」の解説付き
- 140字以内に最適化（日本語X）
- ハッシュタグ候補の自動付与

#### 2.1.3 コピーボタン
- 各生成結果にワンクリックコピーボタン
- コピー完了のフィードバック（トースト通知）

#### 2.1.4 生成履歴
- 過去の入力と生成結果をlocalStorageに保存
- 履歴一覧表示
- 再利用（過去の結果をコピー）
- 履歴削除

### 2.2 将来機能（Phase 2以降）

#### Note向け変換
- 独り言をNote最適の記事構成に変換
- タイトル案 + 見出し構成 + 本文

#### トンマナカスタマイズ
- ユーザーの口調・キャラ設定
- 「ですます調」「だ・である調」「カジュアル」等

#### X直接投稿連携
- シェアボタン方式（intent/tweet）でXへ直接投稿

#### バズ実績フィードバック
- 投稿後のいいね数を入力→AIプロンプト改善

#### ユーザー認証・クラウド保存
- Supabase Auth
- 履歴のクラウド同期

---

## 3. 非機能要件

### 3.1 パフォーマンス
- 生成レスポンス: 3秒以内
- ページロード: 1秒以内（静的サイト）

### 3.2 コスト制約
- **ゼロ円運用**を目標
- Gemini API無料枠（1,000回/日）
- Cloudflare Pages/Functions無料枠
- ドメイン: 初期は *.pages.dev（無料）

### 3.3 セキュリティ
- Gemini APIキーはCloudflare Functionsで秘匿
- フロントエンドに APIキーを露出させない
- レート制限: IP単位で1分あたり5回まで

### 3.4 対応デバイス
- モバイルファースト（スマホでの利用を想定）
- デスクトップ対応

---

## 4. 技術設計

### 4.1 アーキテクチャ

```
[ブラウザ]
  ↓ POST /api/generate
[Cloudflare Function]
  ↓ Gemini API呼び出し
[Google Gemini 2.5 Flash-Lite]
  ↓ JSON応答
[Cloudflare Function]
  ↓ 整形してレスポンス
[ブラウザ]
  ↓ 結果表示 + localStorage保存
```

### 4.2 技術スタック

| レイヤー | 技術 | 理由 |
|---------|------|------|
| フロントエンド | HTML + CSS + Vanilla JS | シンプル、高速、学習コスト低 |
| サーバーレスAPI | Cloudflare Functions | 無料枠、APIキー秘匿 |
| AI/LLM | Gemini 2.5 Flash-Lite | 無料1,000回/日、十分な品質 |
| ホスティング | Cloudflare Pages | 無料、自動デプロイ |
| データ保存 | localStorage | MVP段階、ゼロコスト |
| バージョン管理 | GitHub | 既存アカウント活用 |

### 4.3 ファイル構成

```
BUZZメーカー/
├── index.html          # メインページ
├── style.css           # スタイルシート
├── app.js              # フロントエンドロジック
├── manifest.json       # PWA対応
├── favicon.svg         # ファビコン
├── functions/
│   └── api/
│       └── generate.js # Gemini API呼び出し
├── 要件定義書.md
└── README.md
```

### 4.4 API設計

#### POST /api/generate

**リクエスト:**
```json
{
  "input": "今日カフェで仕事してたら隣の人がめっちゃ集中してて自分もやる気出た"
}
```

**レスポンス:**
```json
{
  "success": true,
  "posts": [
    {
      "type": "共感型",
      "text": "カフェで仕事してたら、隣の人がめっちゃ集中してた。\n\nなんか知らんけど「自分も頑張らなきゃ」ってなった。\n\n環境って大事。\n頑張ってる人の近くにいるだけで、自分も頑張れる。\n\n#カフェワーク #集中力",
      "tip": "共感から入り、最後に普遍的な気づきで締める"
    },
    {
      "type": "意外性型",
      "text": "最高の「やる気スイッチ」の場所がわかった。\n\nジムでもなく、自己啓発本でもなく、\n\nカフェで隣の席の人が集中してるのを見ること。\n\n人間、環境で9割決まる。",
      "tip": "冒頭で興味を引き、意外な答えを提示"
    },
    {
      "type": "ストーリー型",
      "text": "今日カフェで仕事してたら、隣の人がものすごい集中力で作業してた。\n\n気づいたら自分も2時間ノンストップで作業してた。\n\n「環境を変える」って、こういうことか。",
      "tip": "体験談→結果→気づきの3段構成"
    }
  ]
}
```

---

## 5. バズるXポストの定義

### 5.1 構造パターン

| パターン | 構造 | 例 |
|---------|------|-----|
| **共感型** | 共感できる体験 → 気づき | 「〇〇って、実は△△なんよ」 |
| **意外性型** | フック → 意外な答え | 「〇〇だと思ってたけど、実は△△」 |
| **リスト型** | 数字 + ポイント列挙 | 「〇〇な人の3つの特徴」 |
| **ストーリー型** | 体験 → 結果 → 教訓 | 「〇〇したら人生変わった」 |
| **対比型** | Before → After | 「昔: 〇〇 → 今: △△」 |
| **問いかけ型** | 質問 → 自分の答え | 「なぜ〇〇なのか？答えは...」 |

### 5.2 バズるための要素

1. **冒頭3秒で掴む** - 最初の1行でスクロールを止める
2. **改行を活用** - 読みやすさ、テンポ感
3. **具体性** - 抽象的ではなく具体的なエピソード
4. **感情を動かす** - 共感、驚き、感動
5. **140字前後** - 長すぎず短すぎない
6. **行動を促す** - RT、リプライしたくなる内容

### 5.3 ハッシュタグ戦略
- 関連性の高いタグを2-3個
- トレンドタグの活用（可能であれば）
- ニッチすぎず広すぎない

---

## 6. Gemini API設計

### 6.1 使用モデル
- **Gemini 2.5 Flash-Lite**
- 無料枠: 15 RPM / 1,000回/日

### 6.2 システムプロンプト（案）

```
あなたはX（旧Twitter）のバズ投稿の専門家です。
ユーザーの独り言や思いつきを、Xでバズりやすいポストに変換してください。

## ルール
1. 3つの異なるパターン（共感型、意外性型、ストーリー型）で生成
2. 各ポストは日本語で140字以内
3. 冒頭1行で読者の興味を引く
4. 適切な改行でテンポよく
5. 関連ハッシュタグを2-3個付与
6. 各パターンに「バズりポイント」を1行で解説

## 出力形式
JSON形式で出力してください:
{
  "posts": [
    {"type": "共感型", "text": "...", "tip": "..."},
    {"type": "意外性型", "text": "...", "tip": "..."},
    {"type": "ストーリー型", "text": "...", "tip": "..."}
  ]
}
```

### 6.3 レート制限対策
- フロントエンド側で連続リクエスト防止（ボタン無効化）
- Cloudflare Function側でIP単位のレート制限
- 1ユーザー5回/分の制限

---

## 7. UI/UXデザイン

### 7.1 画面構成

```
┌─────────────────────────────┐
│  🐝 BUZZメーカー            │
├─────────────────────────────┤
│                             │
│  [テキストエリア]            │
│  あなたの独り言を入力...     │
│                             │
│  [🐝 バズらせる] ボタン      │
│                             │
├─────────────────────────────┤
│  生成結果                    │
│  ┌─────────────────────┐   │
│  │ 共感型               │   │
│  │ ポスト内容...        │   │
│  │ 💡 バズりポイント    │   │
│  │ [コピー]             │   │
│  └─────────────────────┘   │
│  ┌─────────────────────┐   │
│  │ 意外性型             │   │
│  │ ...                  │   │
│  └─────────────────────┘   │
│  ┌─────────────────────┐   │
│  │ ストーリー型          │   │
│  │ ...                  │   │
│  └─────────────────────┘   │
├─────────────────────────────┤
│  📋 生成履歴               │
│  ・2/15 カフェで仕事...     │
│  ・2/14 朝活始めた...       │
└─────────────────────────────┘
```

### 7.2 カラーテーマ
- プライマリ: イエロー系（🐝 ハチ＝BUZZ のイメージ）
- アクセント: ブラック（Xのブランドカラー）
- 背景: ダーク or ライト（シンプル）

### 7.3 レスポンシブ
- モバイルファースト
- 最大幅600px程度の1カラムレイアウト

---

## 8. 開発ロードマップ

### Phase 1: MVP（1-2日）
| タスク | 内容 |
|--------|------|
| 1 | プロジェクト作成 + GitHub リポジトリ |
| 2 | Gemini API キー取得 |
| 3 | Cloudflare Function（/api/generate）実装 |
| 4 | フロントエンド（入力 → 生成 → 表示） |
| 5 | コピーボタン実装 |
| 6 | 履歴機能（localStorage） |
| 7 | Cloudflare Pages デプロイ |

### Phase 2: 改善
- Note向け変換追加
- トンマナカスタマイズ
- PWA対応
- OGP / SEO最適化
- カスタムドメイン

### Phase 3: 成長
- ユーザー認証（Supabase）
- バズ実績トラッキング
- プロンプト自動改善
- 有料プラン（Pro）

---

## 9. KPI

| 指標 | 目標（1ヶ月後） |
|------|----------------|
| DAU | 50人 |
| 生成回数/日 | 200回 |
| リピート率 | 40% |
| API無料枠消費率 | 80%以下 |

---

## 10. リスクと対策

| リスク | 対策 |
|--------|------|
| Gemini無料枠の上限到達 | レート制限 + キャッシュ（同じ入力は再生成しない） |
| 生成品質が低い | プロンプト改善 + Few-shot例の充実 |
| API仕様変更 | モデル名を環境変数化、切り替え容易に |
| 不適切な入力 | Geminiのセーフティフィルター活用 |
